<!DOCTYPE html>
<html lang="vi">
    <!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công cụ tính dòng tiền nâng cấp - The Privé - KHU CĂN HỘ BIỆT LẬP NGAY TRUNG TÂM SÀI GÒN</title>

    <!-- MÔ TẢ CHO SEO (Google, Bing, etc.) -->
    <meta name="description" content="Công cụ tính dòng tiền nâng cấp cho dự án The Privé. Giúp bạn dễ dàng tính toán, so sánh và lựa chọn căn hộ phù hợp với nhu cầu đầu tư hoặc an cư tại khu căn hộ biệt lập trung tâm Sài Gòn.">

    <!-- FAVICON (Biểu tượng nhỏ trên tab trình duyệt) -->
    <!-- Thay 'path/to/your/favicon.ico' và 'path/to/your/apple-touch-icon.png' bằng đường dẫn thực tế -->
    <link rel="icon" href="path/to/your/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="path/to/your/apple-touch-icon.png">

    <!-- OPEN GRAPH META TAGS (Cho Facebook, LinkedIn, Pinterest, Zalo, etc.) -->
    <meta property="og:title" content="Công cụ Tính Dòng Tiền The Privé - Lựa Chọn Thông Minh">
    <meta property="og:description" content="Khám phá công cụ tính dòng tiền The Privé để phân tích chi tiết và đưa ra quyết định đầu tư sáng suốt cho căn hộ mơ ước tại trung tâm Sài Gòn. Cung cấp bởi Đại lý chiến lược OneS.">
    <!-- SỬ DỤNG ẢNH TỪ GOOGLE DRIVE -->
    <meta property="og:image" content="https://drive.google.com/uc?export=view&id=1YWBWiQLRbARdnOJ8OaLCryatAtU1PULs">
    <meta property="og:image:type" content="image/png"> <!-- Hoặc image/jpeg nếu là file JPG -->
    <!-- Bạn nên kiểm tra kích thước thực tế của ảnh và cập nhật width/height nếu cần -->
    <meta property="og:image:width" content="1200"> <!-- Chiều rộng khuyến nghị -->
    <meta property="og:image:height" content="630"> <!-- Chiều cao khuyến nghị -->
    <!-- Thay 'https://www.yourwebsite.com/cong-cu-tinh-dong-tien-the-prive.html' bằng URL thực tế của trang này -->
    <meta property="og:url" content="https://www.yourwebsite.com/cong-cu-tinh-dong-tien-the-prive.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="The Privé - Công Cụ Tính Dòng Tiền">
    <meta property="og:locale" content="vi_VN">

    <!-- TWITTER CARD META TAGS (Cho Twitter) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Công cụ Tính Dòng Tiền The Privé - Lựa Chọn Thông Minh">
    <meta name="twitter:description" content="Sử dụng công cụ tính dòng tiền The Privé để phân tích và lựa chọn căn hộ đầu tư tối ưu. Thông tin từ Đại lý OneS.">
    <!-- SỬ DỤNG ẢNH TỪ GOOGLE DRIVE -->
    <meta name="twitter:image" content="https://drive.google.com/uc?export=view&id=1YWBWiQLRbARdnOJ8OaLCryatAtU1PULs">
    <!-- <meta name="twitter:site" content="@YourTwitterHandle"> -->
    <!-- <meta name="twitter:creator" content="@CreatorTwitterHandle"> -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        /* ... (phần style còn lại của bạn) ... */
        .agent-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }
    </style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công cụ tính dòng tiền nâng cấp - The Privé - KHU CĂN HỘ BIỆT LẬP NGAY TRUNG TÂM SÀI GÒN</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background-color: #1a365d;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .section {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 8px;
            margin: 4px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .btn {
            padding: 10px 20px;
            background-color: #1a365d;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .btn:hover {
            background-color: #2c5282;
        }
        .map-container {
            position: relative;
            margin-bottom: 20px;
        }
        .map-button {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: rgba(26, 54, 93, 0.7);
            color: white;
            text-align: center;
            line-height: 30px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }
        .map-button:hover {
            background-color: rgba(26, 54, 93, 1);
        }
        .tab {
            padding: 10px 20px;
            background-color: #e2e8f0;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            margin-right: 5px;
            cursor: pointer;
        }
        .tab.active {
            background-color: #1a365d;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .footer {
            text-align: center;
            color: #718096;
            font-size: 12px;
        }
        .highlight {
            font-weight: bold;
            color: #c53030;
        }
        .apartment-data-container {
            position: relative;
        }
        .apartment-info {
            position: absolute;
            top: -10px;
            right: 10px;
            background: white;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 100;
            display: none;
        }
        .info-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        .logo-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .agent-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container">
        <!-- Header với logo và thông tin đại lý -->
        <header class="header">
            <div class="logo-container">
                <h1 class="text-2xl font-bold">CÔNG CỤ TÍNH DÒNG TIỀN THE PRIVÉ - Cre:OneS</h1>
                <div class="flex-grow"></div>
                <div class="agent-info">
                    <div class="text-lg font-bold">Đại lý chiến lược OneS</div>
                    <div class="text-xl font-bold">HOTLINE: 090 398 3737</div>
                </div>
            </div>
        </header>

        <!-- Phần mặt bằng tổng và lựa chọn căn hộ -->
        <section class="section">
            <h2 class="text-xl font-bold mb-4">CHỌN CĂN HỘ</h2>
            
            <div class="flex mb-4">
                <div class="tab active" onclick="openTab('master-plan')">Mặt bằng tổng</div>
                <div class="tab" onclick="openTab('floor-plan')">Mặt bằng tầng điển hình</div>
            </div>
            
            <div class="tab-content active" id="master-plan">
                <div class="map-container">
                    <img src="https://lh3.googleusercontent.com/d/1Zi3Fqv-aveEy42MT1tte5wtgzAW3Dhnw" alt="Mặt bằng tổng The Privé" class="w-full">
                    <!-- Các nút tháp sẽ được thêm bằng JS -->
                </div>
                <p class="mt-2 text-center text-sm text-gray-600">Chọn tháp từ mặt bằng tổng để xem mặt bằng tầng điển hình</p>
            </div>
            
            <div class="tab-content" id="floor-plan">
                <div class="map-container" id="floor-plan-container">
                    <img id="floor-plan-image" src="https://page1.genspark.site/v1/base64_upload/a445fbe580f4bffd3fae5b3330874ffa" alt="Mặt bằng tầng điển hình" class="w-full">
                    <!-- Các nút căn hộ sẽ được thêm bằng JS -->
                </div>
                <p class="mt-2 text-center text-sm text-gray-600">Chọn căn hộ từ sơ đồ để tự động điền thông tin</p>
            </div>
            
            <div class="mt-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="font-bold">Chọn tháp:</label>
                        <select id="tower-select" class="w-full p-2 border rounded">
                            <option value="">-- Chọn tháp --</option>
                            <option value="5">Tháp 5</option>
                            <option value="6">Tháp 6</option>
                            <option value="7">Tháp 7</option>
                            <option value="8">Tháp 8</option>
                        </select>
                    </div>
                    <div>
                        <label class="font-bold">Chọn căn hộ:</label>
                        <select id="apartment-select" class="w-full p-2 border rounded">
                            <option value="">-- Chọn căn hộ --</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <!-- Phần thông tin căn hộ đã chọn -->
        <section class="section">
            <h2 class="text-xl font-bold mb-4">THÔNG TIN CĂN HỘ</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="ma_can_ho">Mã căn hộ:</label>
                    <input type="text" id="ma_can_ho" placeholder="Nhập mã căn hộ">
                </div>
                <div>
                    <label for="gia_m2">Đơn giá (VNĐ/m²):</label>
                    <input type="number" id="gia_m2" placeholder="Nhập đơn giá" value="99000000">
                </div>
                <div>
                    <label for="dien_tich_tim_tuong">Diện tích tim tường (m²):</label>
                    <input type="number" id="dien_tich_tim_tuong" step="0.01" placeholder="Nhập diện tích tim tường">
                </div>
                <div>
                    <label for="dien_tich_thong_thuy">Diện tích thông thủy (m²):</label>
                    <input type="number" id="dien_tich_thong_thuy" step="0.01" placeholder="Nhập diện tích thông thủy">
                </div>
                <div>
                    <label for="huong_can">Hướng căn hộ:</label>
                    <input type="text" id="huong_can" placeholder="Hướng căn hộ">
                </div>
                <div>
                    <label for="view_can">View căn hộ:</label>
                    <input type="text" id="view_can" placeholder="View căn hộ">
                </div>
                <div>
                    <label for="loai_can_ho">Loại căn hộ:</label>
                    <select id="loai_can_ho">
                        <option value="1 Phòng ngủ">1 Phòng ngủ</option>
                        <option value="2 Phòng ngủ">2 Phòng ngủ</option>
                        <option value="3 Phòng ngủ">3 Phòng ngủ</option>
                        <option value="Penthouse/Duplex">Penthouse/Duplex</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Phần cài đặt thuế và phí -->
        <section class="section">
            <h2 class="text-xl font-bold mb-4">CÀI ĐẶT THUẾ & PHÍ</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="vat_percent">Thuế VAT (%):</label>
                    <input type="number" id="vat_percent" placeholder="Tỷ lệ VAT" value="10">
                </div>
                <div>
                    <label for="phi_bao_tri_percent">Phí bảo trì (%):</label>
                    <input type="number" id="phi_bao_tri_percent" placeholder="Phí bảo trì" value="2">
                </div>
            </div>
        </section>

        <!-- Phần chính sách ưu đãi -->
        <section class="section">
            <h2 class="text-xl font-bold mb-4">CHÍNH SÁCH ƯU ĐÃI</h2>
            
            <div class="mb-4">
                <h3 class="font-bold">1. Chiết khấu Đăng ký nguyện vọng (3%)</h3>
                <div class="flex items-center mt-2">
                    <input type="checkbox" id="chiet_khau_nguyen_vong" class="mr-2">
                    <label for="chiet_khau_nguyen_vong">Khách hàng có Đăng ký nguyện vọng giao dịch sản phẩm được ĐVKD xác nhận trước 15/06/2025?</label>
                </div>
            </div>
            
            <div class="mb-4">
                <h3 class="font-bold">2. Chiết khấu Ưu đãi đặc biệt (Tối đa 2%)</h3>
                <div class="flex items-center mt-2">
                    <input type="checkbox" id="chiet_khau_dac_biet_1" class="mr-2 chiet-khau-dac-biet">
                    <label for="chiet_khau_dac_biet_1">Khách hàng là KH đã/đang giao dịch sản phẩm do DXG làm CĐT/Nhà phát triển?</label>
                </div>
                <div class="flex items-center mt-2">
                    <input type="checkbox" id="chiet_khau_dac_biet_2" class="mr-2 chiet-khau-dac-biet">
                    <label for="chiet_khau_dac_biet_2">Khách hàng là Cổ đông sở hữu cổ phiếu DXG/DXS từ 10,000 CP trước ngày công bố dự án?</label>
                </div>
                <div class="flex items-center mt-2">
                    <input type="checkbox" id="chiet_khau_dac_biet_3" class="mr-2 chiet-khau-dac-biet">
                    <label for="chiet_khau_dac_biet_3">Khách hàng là CBNV ngân hàng tài trợ HOẶC có sổ tiết kiệm/TK ≥ 1 tỷ tại NH tài trợ?</label>
                </div>
                <p class="text-sm text-gray-600 mt-2">Lưu ý: Nếu khách hàng đáp ứng nhiều tiêu chuẩn thì vẫn chỉ áp dụng 1 mức chiết khấu là 2%</p>
            </div>
            
            <div class="mb-4">
                <h3 class="font-bold">3. Chiết khấu Giao dịch nhiều sản phẩm</h3>
                <div class="mt-2">
                    <select id="chiet_khau_mua_nhieu" class="w-full p-2 border rounded">
                        <option value="0">1 sản phẩm (Không chiết khấu)</option>
                        <option value="1">2 sản phẩm (Chiết khấu 1%)</option>
                        <option value="1.5">Từ 3 sản phẩm trở lên (Chiết khấu 1.5%)</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Phần kết quả giá trị căn hộ -->
        <section class="section">
            <h2 class="text-xl font-bold mb-4">TÍNH TOÁN GIÁ TRỊ CĂN HỘ</h2>
            <table class="table-auto w-full">
                <tr>
                    <td class="font-bold">Tổng giá bán căn hộ (chưa VAT, chưa phí bảo trì):</td>
                    <td id="gia_ban_can_ho_truoc_vat" class="text-right">0 VNĐ</td>
                </tr>
                <tr>
                    <td class="font-bold">Thuế VAT (<span id="vat_percent_display">10</span>%):</td>
                    <td id="vat_amount" class="text-right">0 VNĐ</td>
                </tr>
                <tr>
                    <td class="font-bold">Tổng giá bán căn hộ (bao gồm VAT):</td>
                    <td id="tong_gia_ban_can_ho_gom_vat_ban_dau" class="text-right">0 VNĐ</td>
                </tr>
                <tr>
                    <td class="font-bold">Phí bảo trì (<span id="phi_bao_tri_percent_display">2</span>% trên giá chưa VAT):</td>
                    <td id="phi_bao_tri_amount" class="text-right">0 VNĐ</td>
                </tr>
                <tr class="bg-blue-100">
                    <td class="font-bold">Tổng chiết khấu chung (<span id="tong_phan_tram_chiet_khau_chung">0</span>%):</td>
                    <td id="tong_tien_chiet_khau_chung" class="text-right font-bold">0 VNĐ</td>
                </tr>
                <tr class="bg-green-100">
                    <td class="font-bold">Giá bán cuối cùng (bao gồm VAT, sau chiết khấu chung):</td>
                    <td id="gia_ban_cuoi_cung_gom_vat_sau_ck_chung" class="text-right font-bold">0 VNĐ</td>
                </tr>
            </table>
            <div class="mt-4 text-center">
                <button id="calc-button" class="btn">Tính toán giá trị căn hộ</button>
            </div>
        </section>

        <!-- Phần lựa chọn phương thức thanh toán -->
        <section class="section">
            <h2 class="text-xl font-bold mb-4">PHƯƠNG THỨC THANH TOÁN</h2>
            <div class="flex flex-wrap">
                <div class="tab payment-tab active" onclick="selectPaymentMethod('standard')">PTTT Chuẩn (26 tháng)</div>
                <div class="tab payment-tab" onclick="selectPaymentMethod('fast')">PTTT Nhanh - Ưu đãi "Cực khủng"</div>
                <div class="tab payment-tab" onclick="selectPaymentMethod('loan')">PTTT Hỗ trợ vay ưu đãi (Nhận nhà chỉ với 8.6%)</div>
            </div>
            
            <!-- PTTT Chuẩn -->
            <div id="standard-payment" class="tab-content payment-content active">
                <h3 class="font-bold my-3">PHƯƠNG THỨC THANH TOÁN CHUẨN (26 THÁNG)</h3>
                <table class="table-auto w-full">
                    <thead>
                        <tr>
                            <th>Đợt thanh toán</th>
                            <th>Tỷ lệ (%)</th>
                            <th>Số tiền (VNĐ)</th>
                            <th>Tiến độ / Thời gian</th>
                        </tr>
                    </thead>
                    <tbody id="standard-payment-table">
                        <!-- Sẽ được điền bằng JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- PTTT Nhanh -->
            <div id="fast-payment" class="tab-content payment-content">
                <h3 class="font-bold my-3">PHƯƠNG THỨC THANH TOÁN NHANH – ƯU ĐÃI "CỰC KHỦNG"</h3>
                <table class="table-auto w-full">
                    <thead>
                        <tr>
                            <th>Đợt thanh toán</th>
                            <th>Tỷ lệ (%)</th>
                            <th>Số tiền (VNĐ)</th>
                            <th>Tiến độ / Thời gian</th>
                        </tr>
                    </thead>
                    <tbody id="fast-payment-table">
                        <!-- Sẽ được điền bằng JavaScript -->
                    </tbody>
                </table>
                <div class="mt-4 bg-yellow-100 p-3 rounded">
                    <p class="font-bold">Ưu đãi đặc biệt: Chiết khấu 8% cho khoản thanh toán 60% giá trị căn hộ</p>
                    <p>Tổng số tiền được chiết khấu: <span id="chiet_khau_thanh_toan_nhanh_amount" class="font-bold">0 VNĐ</span></p>
                </div>
            </div>
            
            <!-- PTTT Vay -->
            <div id="loan-payment" class="tab-content payment-content">
                <h3 class="font-bold my-3">PHƯƠNG THỨC HỖ TRỢ VAY ƯU ĐÃI – NHẬN NHÀ CHỈ VỚI 8,6%</h3>
                
                <div class="bg-gray-100 p-4 rounded-lg mb-4">
                    <h4 class="font-bold mb-2">Thông tin khoản vay</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="lai_suat_vay_uu_dai_nam">Lãi suất vay ưu đãi (%/năm):</label>
                            <input type="number" id="lai_suat_vay_uu_dai_nam" value="7.5" step="0.1">
                        </div>
                        <div>
                            <label for="thoi_gian_vay_nam">Thời gian vay (năm):</label>
                            <input type="number" id="thoi_gian_vay_nam" value="25">
                        </div>
                        <div>
                            <label for="thoi_gian_ho_tro_lai_suat_thang">Thời gian hỗ trợ lãi suất (tháng):</label>
                            <input type="number" id="thoi_gian_ho_tro_lai_suat_thang" value="24">
                        </div>
                        <div>
                            <label for="thoi_gian_an_han_goc_thang">Thời gian ân hạn nợ gốc (tháng):</label>
                            <input type="number" id="thoi_gian_an_han_goc_thang" value="24">
                        </div>
                    </div>
                </div>
                
                <table class="table-auto w-full mb-4">
                    <thead>
                        <tr>
                            <th>Đợt thanh toán</th>
                            <th>Tỷ lệ (%)</th>
                            <th>Số tiền (VNĐ)</th>
                            <th>Tiến độ / Thời gian</th>
                        </tr>
                    </thead>
                    <tbody id="loan-payment-table">
                        <!-- Sẽ được điền bằng JavaScript -->
                    </tbody>
                </table>
                
                <div class="bg-green-100 p-4 rounded-lg">
                    <h4 class="font-bold mb-2">Thông tin trả góp</h4>
                    <div id="loan-payment-details">
                        <!-- Sẽ được điền bằng JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p>© 2025 - Công cụ tính dòng tiền The Privé - vutrongkhai</p>
            <p>Đại lý chiến lược OneS - HOTLINE: 090 398 3737</p>
        </footer>
    </div>

    <script>
        // Dữ liệu căn hộ mẫu (dựa trên hình ảnh đã cung cấp)
        const apartmentData = {
            // Tháp 5
            '5': {
                '01': { code: 'A1-1', type: '3 Phòng ngủ', area: 98.50, netArea: 89.70, direction: 'Đông Nam', view: 'Hồ bơi' },
                '02': { code: 'C1-1', type: '1 Phòng ngủ', area: 49.80, netArea: 44.70, direction: 'Đông Nam', view: 'Công viên' },
                '03': { code: 'B4-1', type: '2 Phòng ngủ', area: 76.30, netArea: 70.20, direction: 'Đông Nam', view: 'Công viên' },
                '04': { code: 'B5-1', type: '2 Phòng ngủ', area: 80.60, netArea: 73.30, direction: 'Tây Nam', view: 'Công viên' },
                '05': { code: 'B6-1', type: '2 Phòng ngủ', area: 81.00, netArea: 73.90, direction: 'Tây Nam', view: 'Sông Sài Gòn' },
                '06': { code: 'A2a-1', type: '3 Phòng ngủ', area: 98.50, netArea: 89.40, direction: 'Tây Bắc', view: 'Sông Sài Gòn' },
                '07': { code: 'B1-1', type: '2 Phòng ngủ', area: 80.90, netArea: 74.90, direction: 'Tây Bắc', view: 'Hồ bơi' },
                '08': { code: 'B2-1', type: '2 Phòng ngủ', area: 88.70, netArea: 80.70, direction: 'Đông Bắc', view: 'Hồ bơi' },
                '09': { code: 'B3-1', type: '2 Phòng ngủ', area: 71.50, netArea: 64.90, direction: 'Đông Bắc', view: 'Sông Sài Gòn' }
            },
            // Tháp 6
            '6': {
                '01': { code: 'A1-1', type: '3 Phòng ngủ', area: 98.50, netArea: 89.70, direction: 'Đông Nam', view: 'Hồ bơi' },
                '02': { code: 'C1-1', type: '1 Phòng ngủ', area: 49.80, netArea: 44.70, direction: 'Đông Nam', view: 'Công viên' },
                '03': { code: 'B4-1', type: '2 Phòng ngủ', area: 76.30, netArea: 70.20, direction: 'Đông Nam', view: 'Công viên' },
                '04': { code: 'B5-1', type: '2 Phòng ngủ', area: 80.60, netArea: 73.30, direction: 'Tây Nam', view: 'Công viên' },
                '05': { code: 'B6-1', type: '2 Phòng ngủ', area: 81.00, netArea: 73.90, direction: 'Tây Nam', view: 'Sông Sài Gòn' },
                '06': { code: 'A2a-1', type: '3 Phòng ngủ', area: 98.50, netArea: 89.40, direction: 'Tây Bắc', view: 'Sông Sài Gòn' },
                '07': { code: 'B1-1', type: '2 Phòng ngủ', area: 80.90, netArea: 74.90, direction: 'Tây Bắc', view: 'Hồ bơi' },
                '08': { code: 'B2-1', type: '2 Phòng ngủ', area: 88.70, netArea: 80.70, direction: 'Đông Bắc', view: 'Hồ bơi' },
                '09': { code: 'B3-1', type: '2 Phòng ngủ', area: 71.50, netArea: 64.90, direction: 'Đông Bắc', view: 'Sông Sài Gòn' }
            },
            // Tháp 7
            '7': {
                '01': { code: 'A1-1', type: '3 Phòng ngủ', area: 98.50, netArea: 89.70, direction: 'Đông Nam', view: 'Hồ bơi' },
                '02': { code: 'C1-1', type: '1 Phòng ngủ', area: 49.80, netArea: 44.70, direction: 'Đông Nam', view: 'Công viên' },
                '03': { code: 'B4-1', type: '2 Phòng ngủ', area: 76.30, netArea: 70.20, direction: 'Đông Nam', view: 'Công viên' },
                '04': { code: 'B5-1', type: '2 Phòng ngủ', area: 80.60, netArea: 73.30, direction: 'Tây Nam', view: 'Công viên' },
                '05': { code: 'B6-1', type: '2 Phòng ngủ', area: 81.00, netArea: 73.90, direction: 'Tây Nam', view: 'Sông Sài Gòn' },
                '06': { code: 'A2a-1', type: '3 Phòng ngủ', area: 98.50, netArea: 89.40, direction: 'Tây Bắc', view: 'Sông Sài Gòn' },
                '07': { code: 'B1-1', type: '2 Phòng ngủ', area: 80.90, netArea: 74.90, direction: 'Tây Bắc', view: 'Hồ bơi' },
                '08': { code: 'B2-1', type: '2 Phòng ngủ', area: 88.70, netArea: 80.70, direction: 'Đông Bắc', view: 'Hồ bơi' },
                '09': { code: 'B3-1', type: '2 Phòng ngủ', area: 71.50, netArea: 64.90, direction: 'Đông Bắc', view: 'Sông Sài Gòn' }
            },
            // Tháp 8
            '8': {
                '01': { code: 'A1-1', type: '3 Phòng ngủ', area: 98.50, netArea: 89.70, direction: 'Đông Nam', view: 'Hồ bơi' },
                '02': { code: 'C1-1', type: '1 Phòng ngủ', area: 49.80, netArea: 44.70, direction: 'Đông Nam', view: 'Công viên' },
                '03': { code: 'B4-1', type: '2 Phòng ngủ', area: 76.30, netArea: 70.20, direction: 'Đông Nam', view: 'Công viên' },
                '04': { code: 'B5-1', type: '2 Phòng ngủ', area: 80.60, netArea: 73.30, direction: 'Tây Nam', view: 'Công viên' },
                '05': { code: 'B6-1', type: '2 Phòng ngủ', area: 81.00, netArea: 73.90, direction: 'Tây Nam', view: 'Sông Sài Gòn' },
                '06': { code: 'A2a-1', type: '3 Phòng ngủ', area: 98.50, netArea: 89.40, direction: 'Tây Bắc', view: 'Sông Sài Gòn' },
                '07': { code: 'B1-1', type: '2 Phòng ngủ', area: 80.90, netArea: 74.90, direction: 'Tây Bắc', view: 'Hồ bơi' },
                '08': { code: 'B2-1', type: '2 Phòng ngủ', area: 88.70, netArea: 80.70, direction: 'Đông Bắc', view: 'Hồ bơi' },
                '09': { code: 'B3-1', type: '2 Phòng ngủ', area: 71.50, netArea: 64.90, direction: 'Đông Bắc', view: 'Sông Sài Gòn' }
            }
        };

        // Vị trí nút tháp trên mặt bằng tổng
        const towerPositions = {
            '1': { top: '15%', left: '20%' },
            '2': { top: '25%', left: '10%' },
            '3': { top: '40%', left: '18%' },
            '4': { top: '55%', left: '25%' },
            '5': { top: '35%', left: '45%' },
            '6': { top: '50%', left: '45%' },
            '7': { top: '65%', left: '45%' },
            '8': { top: '15%', left: '65%' },
            '9': { top: '40%', left: '70%' },
            '10': { top: '60%', left: '70%' },
            '11': { top: '25%', left: '80%' },
            '12': { top: '50%', left: '85%' }
        };

        // Vị trí căn hộ trên mặt bằng tầng
        const apartmentPositions = {
            '01': { top: '30%', left: '65%' },
            '02': { top: '35%', left: '80%' },
            '03': { top: '50%', left: '80%' },
            '04': { top: '65%', left: '70%' },
            '05': { top: '70%', left: '50%' },
            '06': { top: '70%', left: '20%' },
            '07': { top: '40%', left: '15%' },
            '08': { top: '20%', left: '25%' },
            '09': { top: '20%', left: '45%' }
        };

        // Biến toàn cục
        let giaBanCuoiCungGomVATSauCKChung = 0;
        let selectedTower = '';
        let selectedApartment = '';

        // Khởi tạo trang
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
        });

        // Khởi tạo trang
        function initializePage() {
            // Tạo các nút tháp trên mặt bằng tổng
            createTowerButtons();
            
            // Thiết lập event listeners
            setupEventListeners();
            
            // Thiết lập mặt bằng tầng ban đầu
            document.getElementById('floor-plan-image').src = "https://page1.genspark.site/v1/base64_upload/a445fbe580f4bffd3fae5b3330874ffa";  
        }

        function createTowerButtons() {
            const masterPlanContainer = document.querySelector('#master-plan .map-container');
            
            // Tạo các nút cho các tháp trên mặt bằng tổng
            for (const tower in towerPositions) {
                const button = document.createElement('div');
                button.className = 'map-button';
                button.style.top = towerPositions[tower].top;
                button.style.left = towerPositions[tower].left;
                button.textContent = tower;
                button.setAttribute('data-tower', tower);
                button.addEventListener('click', function() {
                    // Chỉ xử lý tháp 5, 6, 7,8 (theo hình ảnh đã cung cấp)
                    if (['5', '6', '7', '8'].includes(tower)) {
                        selectTower(tower);
                        document.getElementById('tower-select').value = tower;
                        // Chuyển sang tab mặt bằng tầng
                        openTab('floor-plan');
                    } else {
                        alert('Thông tin về tháp này chưa được cập nhật.');
                    }
                });
                masterPlanContainer.appendChild(button);
            }
        }

        function createApartmentButtons(tower) {
            const floorPlanContainer = document.querySelector('#floor-plan-container');
            
            // Xóa các nút cũ
            const oldButtons = floorPlanContainer.querySelectorAll('.map-button');
            oldButtons.forEach(button => button.remove());
            
            // Tạo các nút mới cho các căn hộ
            if (apartmentData[tower]) {
                for (const apt in apartmentPositions) {
                    if (apartmentData[tower][apt]) {
                        const button = document.createElement('div');
                        button.className = 'map-button';
                        button.style.top = apartmentPositions[apt].top;
                        button.style.left = apartmentPositions[apt].left;
                        button.textContent = apt;
                        button.setAttribute('data-apt', apt);
                        button.addEventListener('click', function() {
                            selectApartment(tower, apt);
                            document.getElementById('apartment-select').value = apt;
                        });
                        floorPlanContainer.appendChild(button);
                    }
                }
            }
        }

        function setupEventListeners() {
            // Event listener cho nút tính toán
            document.getElementById('calc-button').addEventListener('click', calculateApartmentValue);
            
            // Event listeners cho các trường input
            document.getElementById('vat_percent').addEventListener('change', updateVATDisplay);
            document.getElementById('phi_bao_tri_percent').addEventListener('change', updatePBTDisplay);
            
            // Event listeners cho select tháp và căn hộ
            document.getElementById('tower-select').addEventListener('change', function() {
                const tower = this.value;
                if (tower) {
                    selectTower(tower);
                }
            });
            
            document.getElementById('apartment-select').addEventListener('change', function() {
                const apt = this.value;
                if (apt && selectedTower) {
                    selectApartment(selectedTower, apt);
                }
            });
            
            // Event listeners cho các checkbox chiết khấu đặc biệt
            document.querySelectorAll('.chiet-khau-dac-biet').forEach(function(checkbox) {
                checkbox.addEventListener('change', function() {
                    // Nếu checkbox này được chọn, hãy bỏ chọn các checkbox khác
                    if (this.checked) {
                        document.querySelectorAll('.chiet-khau-dac-biet').forEach(function(cb) {
                            if (cb !== this) {
                                cb.checked = false;
                            }
                        }, this);
                    }
                });
            });
        }

        function updateVATDisplay() {
            document.getElementById('vat_percent_display').textContent = document.getElementById('vat_percent').value;
        }

        function updatePBTDisplay() {
            document.getElementById('phi_bao_tri_percent_display').textContent = document.getElementById('phi_bao_tri_percent').value;
        }

        function selectTower(tower) {
            selectedTower = tower;
            
            // Cập nhật mặt bằng tầng
            document.getElementById('floor-plan-image').src = "https://page1.genspark.site/v1/base64_upload/a445fbe580f4bffd3fae5b3330874ffa";
            
            // Tạo các nút căn hộ
            createApartmentButtons(tower);
            
            // Reset dropdown căn hộ
            const apartmentSelect = document.getElementById('apartment-select');
            apartmentSelect.innerHTML = '<option value="">-- Chọn căn hộ --</option>';
            
            // Thêm các căn hộ vào dropdown
            if (apartmentData[tower]) {
                for (const apt in apartmentData[tower]) {
                    const option = document.createElement('option');
                    option.value = apt;
                    option.textContent = `${apt} - ${apartmentData[tower][apt].code} (${apartmentData[tower][apt].area}m²)`;
                    apartmentSelect.appendChild(option);
                }
            }
        }

        function selectApartment(tower, apt) {
            selectedApartment = apt;
            
            if (apartmentData[tower] && apartmentData[tower][apt]) {
                const data = apartmentData[tower][apt];
                
                // Điền thông tin căn hộ vào các trường
                document.getElementById('ma_can_ho').value = `${tower}-${apt}`;
                document.getElementById('dien_tich_tim_tuong').value = data.area;
                document.getElementById('dien_tich_thong_thuy').value = data.netArea;
                document.getElementById('huong_can').value = data.direction;
                document.getElementById('view_can').value = data.view;
                document.getElementById('loai_can_ho').value = data.type;
                
                // Tính toán giá trị căn hộ
                calculateApartmentValue();
            }
        }

        function calculateApartmentValue() {
            // Lấy giá trị từ các trường đầu vào
            const giaBanM2 = parseFloat(document.getElementById('gia_m2').value) || 0;
            const dienTichTimTuong = parseFloat(document.getElementById('dien_tich_tim_tuong').value) || 0;
            const vatPercent = parseFloat(document.getElementById('vat_percent').value) || 10;
            const phiBaoTriPercent = parseFloat(document.getElementById('phi_bao_tri_percent').value) || 2;
            
            // Tính giá trị căn hộ cơ bản
            const giaBanCanHoTruocVAT = giaBanM2 * dienTichTimTuong;
            const vatAmount = giaBanCanHoTruocVAT * (vatPercent / 100);
            const tongGiaBanCanHoGomVATBanDau = giaBanCanHoTruocVAT + vatAmount;
            const phiBaoTriAmount = giaBanCanHoTruocVAT * (phiBaoTriPercent / 100);
            
            // Tính chiết khấu
            let chietKhauNguyenVongPercent = document.getElementById('chiet_khau_nguyen_vong').checked ? 3 : 0;
            
            let chietKhauDacBietPercent = 0;
            document.querySelectorAll('.chiet-khau-dac-biet:checked').forEach(function() {
                chietKhauDacBietPercent = 2; // Tối đa 2%, ngay cả khi đáp ứng nhiều tiêu chí
            });
            
            let chietKhauMuaNhieuPercent = parseFloat(document.getElementById('chiet_khau_mua_nhieu').value) || 0;
            
            const tongPhanTramChietKhauChung = chietKhauNguyenVongPercent + chietKhauDacBietPercent + chietKhauMuaNhieuPercent;
            const tongTienChietKhauChung = tongGiaBanCanHoGomVATBanDau * (tongPhanTramChietKhauChung / 100);
            giaBanCuoiCungGomVATSauCKChung = tongGiaBanCanHoGomVATBanDau - tongTienChietKhauChung;
            
            // Hiển thị kết quả tính toán
            document.getElementById('gia_ban_can_ho_truoc_vat').textContent = formatCurrency(giaBanCanHoTruocVAT);
            document.getElementById('vat_amount').textContent = formatCurrency(vatAmount);
            document.getElementById('tong_gia_ban_can_ho_gom_vat_ban_dau').textContent = formatCurrency(tongGiaBanCanHoGomVATBanDau);
            document.getElementById('phi_bao_tri_amount').textContent = formatCurrency(phiBaoTriAmount);
            document.getElementById('tong_phan_tram_chiet_khau_chung').textContent = tongPhanTramChietKhauChung;
            document.getElementById('tong_tien_chiet_khau_chung').textContent = formatCurrency(tongTienChietKhauChung);
            document.getElementById('gia_ban_cuoi_cung_gom_vat_sau_ck_chung').textContent = formatCurrency(giaBanCuoiCungGomVATSauCKChung);
            
            // Cập nhật các phương thức thanh toán
            calculateStandardPayment(giaBanCuoiCungGomVATSauCKChung, phiBaoTriAmount);
            calculateFastPayment(giaBanCuoiCungGomVATSauCKChung, phiBaoTriAmount);
            calculateLoanPayment(giaBanCuoiCungGomVATSauCKChung, phiBaoTriAmount);
        }

        function calculateStandardPayment(totalPrice, maintenanceFee) {
            const table = document.getElementById('standard-payment-table');
            table.innerHTML = ''; // Xóa dữ liệu cũ
            
            const tienDatCoc = 100000000; // 100 triệu
            
            // Đợt 1: Ký HĐMB (10%)
            const dot1 = totalPrice * 0.1;
            const dot1ThucDong = Math.max(0, dot1 - tienDatCoc);
            
            // Các đợt tiếp theo: 24 đợt, mỗi đợt 2.5% (tổng 60%)
            const dotTiepTheo = totalPrice * 0.025;
            
            // Đợt bàn giao căn hộ (25%)
            const dotBanGiao = totalPrice * 0.25;
            
            // Đợt nhận GCN (5%)
            const dotNhanGCN = totalPrice * 0.05;
            
            // Tạo các hàng trong bảng
            addPaymentRow(table, 'Đặt cọc', '', formatCurrency(tienDatCoc), 'Ngay khi đăng ký');
            addPaymentRow(table, 'Đợt 1: Ký HĐMB', '10%', formatCurrency(dot1ThucDong), '07 ngày kể từ ngày thông báo ký HĐMB');
            
            // Thêm 24 đợt thanh toán, mỗi đợt 2.5%
            for (let i = 1; i <= 24; i++) {
                addPaymentRow(table, `Đợt ${i+1}: Thanh toán lần ${i}`, '2.5%', formatCurrency(dotTiepTheo), `30 ngày kể từ ngày thanh toán lần ${i}`);
            }
            
            addPaymentRow(table, 'Đợt bàn giao căn hộ', '25%', formatCurrency(dotBanGiao), 'Theo thông báo bàn giao căn hộ');
            addPaymentRow(table, 'Phí bảo trì', '2%', formatCurrency(maintenanceFee), 'Theo thông báo bàn giao căn hộ');
            addPaymentRow(table, 'Đợt nhận GCN', '5%', formatCurrency(dotNhanGCN), 'Theo thông báo nhận GCN');
            
            // Tổng cộng
            const tongCong = totalPrice + maintenanceFee;
            addPaymentRow(table, 'TỔNG CỘNG', '100%', formatCurrency(tongCong), '', 'font-bold');
        }

        function calculateFastPayment(totalPrice, maintenanceFee) {
            const table = document.getElementById('fast-payment-table');
            table.innerHTML = ''; // Xóa dữ liệu cũ
            
            const tienDatCoc = 100000000; // 100 triệu
            
            // Đợt 1: Ký HĐMB (10%)
            const dot1 = totalPrice * 0.1;
            const dot1ThucDong = Math.max(0, dot1 - tienDatCoc);
            
            // Đợt 2: Thanh toán 60%
            const dot2 = totalPrice * 0.6;
            const chietKhauThanhToanNhanhAmount = dot2 * 0.08;
            const dot2ThucDong = dot2 - chietKhauThanhToanNhanhAmount;
            
            // Đợt bàn giao căn hộ (25%)
            const dotBanGiao = totalPrice * 0.25;
            
            // Đợt nhận GCN (5%)
            const dotNhanGCN = totalPrice * 0.05;
            
            // Cập nhật hiển thị chiết khấu thanh toán nhanh
            document.getElementById('chiet_khau_thanh_toan_nhanh_amount').textContent = formatCurrency(chietKhauThanhToanNhanhAmount);
            
            // Tạo các hàng trong bảng
            addPaymentRow(table, 'Đặt cọc', '', formatCurrency(tienDatCoc), 'Ngay khi đăng ký');
            addPaymentRow(table, 'Đợt 1: Ký HĐMB', '10%', formatCurrency(dot1ThucDong), '07 ngày kể từ ngày thông báo ký HĐMB');
            addPaymentRow(table, 'Đợt 2: Thanh toán sớm', '60%', formatCurrency(dot2), '15 ngày kể từ ngày ký HĐMB');
            addPaymentRow(table, 'Chiết khấu thanh toán nhanh (8%)', '', '- ' + formatCurrency(chietKhauThanhToanNhanhAmount), 'Áp dụng cho đợt 2', 'text-red-600');
            addPaymentRow(table, 'Đợt 2: Thực đóng', '', formatCurrency(dot2ThucDong), '', 'font-bold');
            addPaymentRow(table, 'Đợt bàn giao căn hộ', '25%', formatCurrency(dotBanGiao), 'Theo thông báo bàn giao căn hộ');
            addPaymentRow(table, 'Phí bảo trì', '2%', formatCurrency(maintenanceFee), 'Theo thông báo bàn giao căn hộ');
            addPaymentRow(table, 'Đợt nhận GCN', '5%', formatCurrency(dotNhanGCN), 'Theo thông báo nhận GCN');
            
            // Tổng cộng
            const tongCong = dot1ThucDong + dot2ThucDong + dotBanGiao + dotNhanGCN + maintenanceFee + tienDatCoc;
            addPaymentRow(table, 'TỔNG CỘNG', '', formatCurrency(tongCong), '', 'font-bold');
        }

        function calculateLoanPayment(totalPrice, maintenanceFee) {
            const table = document.getElementById('loan-payment-table');
            table.innerHTML = ''; // Xóa dữ liệu cũ
            
            const tienDatCoc = 100000000; // 100 triệu
            
            // Đợt 1: Ký HĐMB (8.6% vốn tự có)
            const dot1VonTuCo = totalPrice * 0.086;
            const dot1VonTuCoThucDong = Math.max(0, dot1VonTuCo - tienDatCoc);
            
            // Ngân hàng giải ngân đợt 1 (61.4%)
            const nganHangGiaiNganDot1 = totalPrice * 0.614;
            
            // Bàn giao khách thanh toán (20%)
            const banGiaoKhachThanhToan = totalPrice * 0.2;
            
            // Bàn giao ngân hàng thanh toán (5%)
            const banGiaoNganHangThanhToan = totalPrice * 0.05;
            
            // Đợt nhận GCN (5%)
            const dotNhanGCN = totalPrice * 0.05;
            
            // Tổng vốn tự có
            const tongVonTuCo = dot1VonTuCo + banGiaoKhachThanhToan + dotNhanGCN;
            
            // Tổng khoản vay
            const tongKhoanVay = nganHangGiaiNganDot1 + banGiaoNganHangThanhToan;
            
            // Tạo các hàng trong bảng
            addPaymentRow(table, 'Đặt cọc', '', formatCurrency(tienDatCoc), 'Ngay khi đăng ký');
            addPaymentRow(table, 'Đợt 1: Ký HĐMB (Vốn tự có)', '8.6%', formatCurrency(dot1VonTuCoThucDong), '07 ngày kể từ ngày thông báo ký HĐMB');
            addPaymentRow(table, 'Đợt 1: Ngân hàng giải ngân', '61.4%', formatCurrency(nganHangGiaiNganDot1), '15 ngày kể từ ngày ký HĐMB');
            addPaymentRow(table, 'Đợt bàn giao: Khách hàng thanh toán', '20%', formatCurrency(banGiaoKhachThanhToan), 'Theo thông báo bàn giao căn hộ');
            addPaymentRow(table, 'Đợt bàn giao: Ngân hàng giải ngân', '5%', formatCurrency(banGiaoNganHangThanhToan), 'Theo thông báo bàn giao căn hộ');
            addPaymentRow(table, 'Phí bảo trì', '2%', formatCurrency(maintenanceFee), 'Theo thông báo bàn giao căn hộ');
            addPaymentRow(table, 'Đợt nhận GCN', '5%', formatCurrency(dotNhanGCN), 'Theo thông báo nhận GCN');
            
            // Tổng cộng
            const tongCong = tongVonTuCo + tongKhoanVay + maintenanceFee;
            addPaymentRow(table, 'TỔNG CỘNG', '100%', formatCurrency(tongCong), '', 'font-bold');
            
            // Tính toán khoản vay
            calculateLoanDetails(tongKhoanVay);
        }

        function calculateLoanDetails(loanAmount) {
            const loanDiv = document.getElementById('loan-payment-details');
            loanDiv.innerHTML = '';
            
            // Lấy thông tin khoản vay
            const laiSuatVayNam = parseFloat(document.getElementById('lai_suat_vay_uu_dai_nam').value) || 7.5;
            const thoiGianVayNam = parseFloat(document.getElementById('thoi_gian_vay_nam').value) || 25;
            const thoiGianHoTroLaiSuatThang = parseFloat(document.getElementById('thoi_gian_ho_tro_lai_suat_thang').value) || 24;
            const thoiGianAnHanGocThang = parseFloat(document.getElementById('thoi_gian_an_han_goc_thang').value) || 24;
            
            // Tính lãi suất tháng
            const laiSuatThang = laiSuatVayNam / 12 / 100;
            
            // Tính tổng số tiền trả mỗi tháng sau thời gian ân hạn
            const soThangTraNo = thoiGianVayNam * 12 - thoiGianAnHanGocThang;
            const soTienTraHangThang = (loanAmount * laiSuatThang * Math.pow(1 + laiSuatThang, soThangTraNo)) / (Math.pow(1 + laiSuatThang, soThangTraNo) - 1);
            
            // Tính tiền lãi trong thời gian ân hạn (chỉ trả lãi, không trả gốc)
            const tienLaiHangThangTrongThoiGianAnHan = loanAmount * laiSuatThang;
            
            // Tạo thông tin chi tiết về khoản vay
            const details = document.createElement('div');
            details.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <p class="font-bold">Tổng số tiền vay:</p>
                        <p>${formatCurrency(loanAmount)}</p>
                    </div>
                    <div>
                        <p class="font-bold">Thời gian vay:</p>
                        <p>${thoiGianVayNam} năm (${thoiGianVayNam * 12} tháng)</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <p class="font-bold">Lãi suất vay ưu đãi:</p>
                        <p>${laiSuatVayNam}%/năm (${(laiSuatVayNam/12).toFixed(2)}%/tháng)</p>
                    </div>
                    <div>
                        <p class="font-bold">Thời gian hỗ trợ lãi suất:</p>
                        <p>${thoiGianHoTroLaiSuatThang} tháng</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <p class="font-bold">Thời gian ân hạn nợ gốc:</p>
                        <p>${thoiGianAnHanGocThang} tháng</p>
                    </div>
                </div>
                
                <div class="bg-white p-4 rounded-lg mt-4">
                    <h5 class="font-bold mb-2">Chi tiết trả góp:</h5>
                    
                    <p class="mb-2"><span class="font-bold">Giai đoạn 1 (${thoiGianHoTroLaiSuatThang} tháng đầu):</span> Chủ đầu tư hỗ trợ lãi suất</p>
                    
                    <p class="mb-2"><span class="font-bold">Giai đoạn 2 (từ tháng ${thoiGianHoTroLaiSuatThang+1} đến tháng ${thoiGianAnHanGocThang}):</span></p>
                    <p>Khách hàng chỉ trả lãi, không trả gốc: ${formatCurrency(tienLaiHangThangTrongThoiGianAnHan)}/tháng</p>
                    
                    <p class="mb-2"><span class="font-bold">Giai đoạn 3 (từ tháng ${thoiGianAnHanGocThang+1} đến tháng ${thoiGianVayNam*12}):</span></p>
                    <p>Khách hàng trả gốc và lãi đều hàng tháng: ${formatCurrency(soTienTraHangThang)}/tháng</p>
                </div>
            `;
            
            loanDiv.appendChild(details);
        }

        function addPaymentRow(table, description, percentage, amount, time, className = '') {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="${className}">${description}</td>
                <td class="${className}">${percentage}</td>
                <td class="${className} text-right">${amount}</td>
                <td class="${className}">${time}</td>
            `;
            table.appendChild(row);
        }

        function formatCurrency(value) {
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND', maximumFractionDigits: 0 }).format(value);
        }

        function openTab(tabName) {
            // Ẩn tất cả nội dung tab
            document.querySelectorAll('.tab-content').forEach(function(tab) {
                tab.classList.remove('active');
            });
            
            // Hiện nội dung tab được chọn
            document.getElementById(tabName).classList.add('active');
            
            // Cập nhật trạng thái active của các tab
            document.querySelectorAll('.tab').forEach(function(tab) {
                tab.classList.remove('active');
            });
            
            // Set active cho tab được chọn
            document.querySelectorAll('.tab').forEach(function(tab) {
                if (tab.getAttribute('onclick').includes(tabName)) {
                    tab.classList.add('active');
                }
            });
        }

        function selectPaymentMethod(method) {
            // Ẩn tất cả nội dung phương thức thanh toán
            document.querySelectorAll('.payment-content').forEach(function(content) {
                content.classList.remove('active');
            });
            
            // Hiện nội dung phương thức được chọn
            document.getElementById(method + '-payment').classList.add('active');
            
            // Cập nhật trạng thái active của các tab
            document.querySelectorAll('.payment-tab').forEach(function(tab) {
                tab.classList.remove('active');
            });
            
            // Set active cho tab được chọn
            document.querySelectorAll('.payment-tab').forEach(function(tab) {
                if (tab.getAttribute('onclick').includes(method)) {
                    tab.classList.add('active');
                }
            });
        }
    </script>
<!-- Nút Zalo CTA -->
<div class="zalo-chat-widget">
    <a href="https://zalo.me/4321344812365733664" target="_blank" aria-label="Chat Zalo với chúng tôi">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048" width="40" height="40">
            <path fill="#FFFFFF" d="M1752 453q56 80 56 179 0 104-59 185t-155 120q-74 29-155 29-90 0-172-39L980 1200q-36 101-36 189 0 73 42 140l448 248q119 66 198 66 97 0 184-50t138-132q37-63 37-134 0-83-44-155t-117-110q-75-39-158-39-73 0-146 30l-120 50q-2-35-2-58 0-152 87-268t228-154q100-28 193-28 116 0 215 46t159 124zm-792 507q0-142-72-258t-194-164q-118-47-232-47-138 0-258 56T44 909q-79 80-79 180 0 101 59 181t155 120q72 29 152 29 94 0 178-39l288-160q33-100 33-186z"/>
        </svg>
        <!-- Bạn có thể thêm chữ ở đây nếu muốn, ví dụ: <span>Chat Zalo</span> -->
    </a>
</div>

<style>
    .zalo-chat-widget {
        position: fixed;
        bottom: 25px; /* Khoảng cách từ dưới lên */
        right: 25px;  /* Khoảng cách từ phải sang */
        z-index: 1000; /* Đảm bảo nút nổi lên trên các phần tử khác */
    }

    .zalo-chat-widget a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 60px;  /* Kích thước nút tròn */
        height: 60px; /* Kích thước nút tròn */
        background-color: #0068FF; /* Màu xanh đặc trưng của Zalo */
        color: white;
        border-radius: 50%; /* Bo tròn thành hình tròn */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Đổ bóng cho đẹp */
        text-decoration: none;
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    .zalo-chat-widget a:hover {
        transform: scale(1.1); /* Phóng to nhẹ khi hover */
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    }

    .zalo-chat-widget svg {
        /* Kích thước icon đã được set trong thẻ SVG, ở đây chỉ để dự phòng */
        /* width: 30px; */
        /* height: 30px; */
    }

    /* Tùy chọn: Nếu bạn muốn thêm chữ bên cạnh icon */
    /*
    .zalo-chat-widget a {
        width: auto;
        padding: 10px 20px;
        border-radius: 30px;
    }
    .zalo-chat-widget svg {
        margin-right: 8px;
    }
    .zalo-chat-widget span {
        font-size: 14px;
        font-weight: bold;
    }
    */
</style>
<!-- Nút Zalo CTA -->
<div class="zalo-chat-widget">
    <a href="https://zalo.me/4321344812365733664" target="_blank" aria-label="Chat Zalo với chúng tôi">
        <!-- THAY THẾ LINK_LOGO_ZALO_OA_CUA_BAN.png BẰNG LINK ẢNH ĐÚNG CỦA BẠN -->
        <img src="https://cnv.vn/wp-content/uploads/2025/01/zalo-oa-png.png" alt="Chat với Zalo OA" width="80" height="80" style="border-radius: 4px;">
        <!-- Bạn có thể thêm chữ ở đây nếu muốn, ví dụ: <span>Chat Zalo</span> -->
    </a>
</div>

<style>
    .zalo-chat-widget {
        position: fixed;
        bottom: 25px; /* Khoảng cách từ dưới lên */
        right: 25px;  /* Khoảng cách từ phải sang */
        z-index: 1000; /* Đảm bảo nút nổi lên trên các phần tử khác */
    }

    .zalo-chat-widget a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100px;  /* Kích thước nút tròn */
        height: 100px; /* Kích thước nút tròn */
        background-color: #ffffff; /* Màu xanh đặc trưng của Zalo */
        color: white;
        border-radius: 50%; /* Bo tròn thành hình tròn */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Đổ bóng cho đẹp */
        text-decoration: none;
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    .zalo-chat-widget a:hover {
        transform: scale(1.1); /* Phóng to nhẹ khi hover */
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    }

    .zalo-chat-widget img {
        /* Kích thước đã được đặt inline trong thẻ img (width="35" height="35") */
        /* Nếu logo của bạn là hình vuông và bạn muốn nó có góc bo tròn nhẹ thay vì tròn hoàn toàn,
           bạn có thể dùng style="border-radius: 4px;" như trong ví dụ trên.
           Nếu logo đã có nền trong suốt và hình dạng phù hợp, bạn có thể không cần border-radius cho img.
        */
    }

    /* Tùy chọn: Nếu bạn muốn thêm chữ bên cạnh icon */
    /*
    .zalo-chat-widget a {
        width: auto; /* Mở rộng nút để chứa chữ */
        padding: 10px 15px; /* Điều chỉnh padding */
        border-radius: 30px; /* Bo tròn cho nút dài hơn */
    }
    .zalo-chat-widget img { /* Nếu có chữ, điều chỉnh lề cho icon/logo */
        margin-right: 8px;
    }
    .zalo-chat-widget span {
        font-size: 14px;
        font-weight: bold;
    }
    */
</style>
</body>  
</html>
